<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ENS í†µí•© í˜ì´ì§€</title>
  <style>
    :root{ --bg:#222; --fg:#fff; --card:#333; --muted:#bbb; --brand:#0074e9; --brand-2:#005bb5; }
    *{box-sizing:border-box}
    body { font-family: Arial, sans-serif; margin: 0; background: var(--bg); color: var(--fg); }

    /* í—¤ë” */
    .header { background: var(--bg); color: var(--fg); padding: 20px; display: flex; align-items: center; gap: 20px; }
    .logo { font-size: 2em; font-weight: bold; color: var(--brand); cursor: pointer; user-select:none }
    .logo:focus{ outline: 2px solid #a8d1ff; border-radius: 6px; }
    .search-box { flex: 1; position: relative; }
    .search-box input { width: 100%; max-width: 680px; padding: 10px 12px; font-size: 1em; border: none; border-radius: 8px; }
    .login-area{margin-left:auto}

    /* ì¹´í…Œê³ ë¦¬ */
    .categories { background: var(--bg); padding: 16px 20px; display: flex; gap: 12px; border-bottom: 1px solid #333; justify-content: center; flex-wrap: wrap; }
    .categories button { background: var(--brand); color: #fff; border: none; border-radius: 10px; min-width: 120px; height: 48px; font-size: 1.05em; font-weight: bold; cursor: pointer; transition: background .2s; padding: 0 14px; }
    .categories button:hover { background: var(--brand-2); }
    .categories button.active { outline: 2px solid #a8d1ff; box-shadow: 0 0 0 3px rgba(168,209,255,.2) inset; }

    /* ê´‘ê³  ë°°ë„ˆ (ì „ì²´ì—ì„œë§Œ ë³´ì„) */
    .ad-banner-slider { position: relative; width: min(900px, 92vw); margin: 32px auto 0; background: #333; border-bottom: 1px solid #444; min-height: 420px; display: flex; align-items: center; justify-content: center; }
    .ad-banner-slider .ad-arrow { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: #fff; border: none; border-radius: 50%; width: 56px; height: 56px; font-size: 2em; cursor: pointer; z-index: 2; display: flex; align-items: center; justify-content: center; transition: background .2s; }
    .ad-banner-slider .ad-arrow:hover { background: var(--brand); }
    .ad-banner-slider .ad-arrow.left { left: -70px; }
    .ad-banner-slider .ad-arrow.right { right: -70px; }
    .ad-banner { position: relative; width: 100%; height: 400px; overflow: hidden; border-radius: 12px; }
    .ad-banner img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; transform: translateX(0); transition: transform .6s cubic-bezier(.77,0,.18,1); will-change: transform; }
    .ad-banner-text { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 1.8em; font-weight: bold; text-shadow: 2px 2px 12px #000; pointer-events: none; z-index: 1; padding: 0 16px; text-align: center; }
    .ad-banner--clickable{cursor:pointer}

    /* ëª©ë¡ */
    .section-title { font-size: 1.6em; font-weight: bold; color: #fff; margin: 28px 0 10px 20px; }
    .products-scroll { display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px; padding: 20px; }
    .products-scroll::-webkit-scrollbar { height: 10px; background: #222; }
    .products-scroll::-webkit-scrollbar-thumb { background: #444; border-radius: 6px; }
    .product { background: var(--card); border-radius: 12px; padding: 14px; text-align: center; min-width: 0; max-width: 100%; min-height: 320px; display: flex; flex-direction: column;}
    .product .main-image { width: 100%; height: 200px; object-fit: cover; margin: 0 auto 10px; border-radius: 8px; cursor: pointer; }
    .product-title { font-size: 1.05em; margin: 6px 0; color: #fff; }
    .product-price { color: #9ddcff; font-weight: bold; margin-top: auto; }

    /* ìƒì„¸ë³´ê¸° (detail.html ìŠ¤íƒ€ì¼) */
    #detailView{ display:none; }
    .title{ font-size:1.4rem; font-weight:800; margin: 18px auto 0; width:min(1100px, 96vw); }
    .container{ width:min(1100px, 96vw); margin: 20px auto; display:grid; grid-template-columns: 1.2fr 1fr; gap: 20px; }
    .card{ background:#2b2b2b; border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,.4); overflow:hidden }

    .image-side{ padding:16px; display:flex; flex-direction:column; gap:10px; }
    .slider{ position:relative; width:100%; height:460px; overflow:hidden; border-radius:10px; background:#111; }
    .slider-track{ display:flex; height:100%; transition:transform .6s ease; }
    .slider-track img{ flex:0 0 100%; width:100%; height:100%; object-fit:cover; }
    .slider-btn{ position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,.5); color:#fff; border:0; border-radius:50%; width:44px; height:44px; cursor:pointer }
    .slider-btn.left{ left:10px } .slider-btn.right{ right:10px }

    .thumbs{ display:flex; gap:8px; flex-wrap:wrap; margin-top:6px; }
    .thumbs img{ width:72px; height:72px; object-fit:cover; border-radius:8px; cursor:pointer; background:#111; border:1px solid #444; }

    .info-side{ padding:16px 18px; display:flex; flex-direction:column; gap:12px; }
    .price{ color:#ff4d4f; font-weight:800; font-size:1.3rem; }
    .badge{ opacity:.9; font-size:1rem; }
    .desc{ opacity:.9; line-height:1.6; white-space: pre-line; }
    .actions{ margin-top:auto; display:flex; gap:10px; }
    .actions button{ flex:1; padding:12px; border-radius:10px; border:0; cursor:pointer; font-weight:700; }
    .actions .primary{ background:var(--brand); color:#fff; }
    .actions .secondary{ background:#3a3a3a; color:#fff; }

    .toolbar{ width:min(1100px, 96vw); margin: 8px auto 0; display:flex; justify-content:space-between; align-items:center; gap:10px; }
    .btn{ background:#3a3a3a; color:#fff; border:0; border-radius:10px; padding:10px 14px; cursor:pointer; font-weight:700 }
    .btn:hover{ background:#4a4a4a }

    .preview{ margin-top:4px; text-align:center; opacity:.85; font-size:.92rem }

    /* í† ìŠ¤íŠ¸ */
    .toast{position:fixed;bottom:20px;right:20px;background:rgba(17,24,39,.9);color:#fff;padding:12px 14px;border-radius:12px;opacity:0;transform:translateY(8px);transition:.25s;z-index:2000}
    .toast.show{opacity:1;transform:translateY(0)}

    mark { background: #ffea7f; color: #222; padding: 0 .15em; border-radius: 3px; }

    @media (max-width: 980px){
      .container{ grid-template-columns: 1fr; }
      .slider{ height:300px; }
    }
  </style>
</head>
<body>
  <!-- í—¤ë” -->
  <div class="header">
    <div class="logo" id="logoHome" role="button" tabindex="0" aria-label="í™ˆìœ¼ë¡œ ì´ë™">ENS</div>
    <div class="search-box">
      <input id="searchInput" type="text" placeholder="ì„ ìˆ˜ ì´ë¦„, íŒ€, í¬ì§€ì…˜ìœ¼ë¡œ ê²€ìƒ‰" aria-label="ê²€ìƒ‰" />
    </div>
    <div class="login-area" id="loginArea"></div>
  </div>

  <!-- ì¹´í…Œê³ ë¦¬ -->
  <div class="categories" id="categoryBar">
    <button type="button" data-target="ì „ì²´" class="active" aria-current="page">ì „ì²´</button>
    <button type="button" data-target="NBA">NBA</button>
    <button type="button" data-target="ì¶•êµ¬">ì¶•êµ¬</button>
    <button type="button" data-target="E-ìŠ¤í¬ì¸ ">e-ìŠ¤í¬ì¸ </button>
    <button type="button" data-target="ì‡¼í•‘">ì‡¼í•‘</button>
    <button type="button" data-target="ë‰´ìŠ¤">ë‰´ìŠ¤</button>
    <button type="button" data-target="ì»¤ë®¤ë‹ˆí‹°">ì»¤ë®¤ë‹ˆí‹°</button>
  </div>

  <!-- ê´‘ê³  ë°°ë„ˆ -->
  <div class="ad-banner-slider" id="bannerSection" aria-label="í”„ë¡œëª¨ì…˜ ë°°ë„ˆ">
    <button type="button" class="ad-arrow left" aria-label="ì´ì „ ë°°ë„ˆ">â€¹</button>
    <div class="ad-banner ad-banner--clickable" id="adBanner" role="button" tabindex="0" aria-label="ë°°ë„ˆ í´ë¦­ ì‹œ ì‡¼í•‘ìœ¼ë¡œ ì´ë™">
      <img src="https://images.unsplash.com/photo-1604726923839-606d2f0e0870?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="ë†êµ¬ìš©í’ˆ ìµœëŒ€ 50% í• ì¸!" />
      <div class="ad-banner-text" id="adBannerText">ë†êµ¬ì˜ ì—´ì •! ì§€ê¸ˆ ì‡¼í•‘í•˜ì„¸ìš”</div>
    </div>
    <button type="button" class="ad-arrow right" aria-label="ë‹¤ìŒ ë°°ë„ˆ">â€º</button>
  </div>

  <!-- ëª©ë¡ -->
  <div id="content"></div>

  <!-- ìƒì„¸ (detail.html ìŠ¤íƒ€ì¼) -->
  <div id="detailView" aria-live="polite">
    <div class="toolbar">
      <button id="backBtn" class="btn" type="button">â† ëª©ë¡ìœ¼ë¡œ</button>
      <div class="muted" style="opacity:.8">ìƒì„¸ í˜ì´ì§€</div>
    </div>

    <h2 class="title" id="dtTitle">ìƒì„¸</h2>

    <div class="container">
      <!-- ì™¼ìª½: ì´ë¯¸ì§€ -->
      <div class="card image-side">
        <div class="slider" id="dtSlider">
          <div class="slider-track" id="sliderTrack"></div>
          <button class="slider-btn left" id="prevBtn" type="button" aria-label="ì´ì „ ì´ë¯¸ì§€">â€¹</button>
          <button class="slider-btn right" id="nextBtn" type="button" aria-label="ë‹¤ìŒ ì´ë¯¸ì§€">â€º</button>
        </div>
        <div id="dtThumbs" class="thumbs"></div>
        <div id="dtPreview" class="preview"></div>
      </div>

      <!-- ì˜¤ë¥¸ìª½: ì •ë³´ -->
      <div class="card info-side">
        <div id="dtPrice" class="price" style="display:none"></div>
        <div id="dtBadge" class="badge"></div>
        <div id="dtDesc" class="desc"></div>
        <div id="dtActions" class="actions" style="display:none">
          <button class="secondary" type="button">ì¥ë°”êµ¬ë‹ˆ</button>
          <button class="primary" type="button">ë°”ë¡œêµ¬ë§¤</button>
        </div>
      </div>
    </div>
  </div>

  <!-- í† ìŠ¤íŠ¸ -->
  <div id="msg" class="toast" role="status" aria-live="polite"></div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      /* ===== í† ìŠ¤íŠ¸ ===== */
      function showToast(text){
        const t=document.getElementById('msg');
        t.textContent=text;
        t.classList.add('show');
        setTimeout(()=> t.classList.remove('show'), 2000);
      }

      /* ===== ì„¸ì…˜/ìœ ì € ===== */
      const USERS_KEY='demo_users', SESSION_KEY='demo_session';
      const getSession=()=>{ try { return JSON.parse(localStorage.getItem(SESSION_KEY)); } catch { return null; } };
      const loadUsers=()=>{ try { return JSON.parse(localStorage.getItem(USERS_KEY)) || []; } catch { return []; } };
      function renderLoginArea(){
        const area=document.getElementById('loginArea');
        const s=getSession();
        if(!s){
          area.innerHTML = `
            <button id="goLogin" type="button"
              style="background:#0074e9;color:#fff;border:none;border-radius:6px;padding:8px 18px;font-weight:700;cursor:pointer">
              ë¡œê·¸ì¸
            </button>
            <a href="signup.html" style="margin-left:8px;color:#9ec2ff;text-decoration:none;font-weight:700">íšŒì›ê°€ì…</a>`;
          document.getElementById('goLogin')?.addEventListener('click', () => { location.href = 'login.html'; });
        } else {
          const users=loadUsers();
          const me=users.find(u => u.username===s.id || u.email===s.id);
          const display = me ? me.username : s.id;
          area.innerHTML = `
            <span style="margin-right:10px">ğŸ‘‹ <b>${display}</b> ë‹˜</span>
            <button id="logoutBtn" type="button"
              style="background:#444;color:#fff;border:none;border-radius:6px;padding:8px 12px;font-weight:700;cursor:pointer">
              ë¡œê·¸ì•„ì›ƒ
            </button>`;
          document.getElementById('logoutBtn')?.addEventListener('click', () => {
            localStorage.removeItem(SESSION_KEY);
            showToast('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤');
            renderLoginArea();
            goHome();
          });
        }
      }

      /* ===== ìœ í‹¸ ===== */
      const escReg = (s) => (s||'').replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
      function highlight(text, q) {
        if (!q) return text;
        const re = new RegExp(escReg(q), 'gi');
        return text.replace(re, (m) => `<mark>${m}</mark>`);
      }
      const norm = (s) => (s ?? '').toString().toLowerCase();

      /* ===== ë°ì´í„° ===== */
      const players = [
        { name:"ë¥´ë¸Œë¡  ì œì„ìŠ¤", sport:"NBA", team:"LA ë ˆì´ì»¤ìŠ¤", position:"SF/PF", number:23, height:"206cm", weight:"113kg",
          main:"https://images.unsplash.com/photo-1517649763962-0c623066013b?auto=format&fit=crop&w=600&q=80",
          thumbnails:["https://images.unsplash.com/photo-1606813902787-53e9497f7f26?auto=format&fit=crop&w=300&q=80","https://images.unsplash.com/photo-1518544881151-1ffb1453f4ec?auto=format&fit=crop&w=300&q=80"],
          bio:"\nNBA ì—­ëŒ€ê¸‰ í¬ì›Œë“œ. ë‹¤ì¬ë‹¤ëŠ¥í•œ í”Œë ˆì´ë©”ì´í‚¹ê³¼ ë¦¬ë”ì‹­." },
        { name:"ìŠ¤í…ŒíŒ ì»¤ë¦¬", sport:"NBA", team:"ê³¨ë“ ìŠ¤í…Œì´íŠ¸ ì›Œë¦¬ì–´ìŠ¤", position:"PG", number:30, height:"188cm", weight:"84kg",
          main:"https://images.unsplash.com/photo-1521412644187-c49fa049e84d?auto=format&fit=crop&w=600&q=80",
          thumbnails:["https://images.unsplash.com/photo-1546519638-68e109498ffc?auto=format&fit=crop&w=300&q=80","https://images.unsplash.com/photo-1550332781-aecd27c8a1a6?auto=format&fit=crop&w=300&q=80"],
          bio:"\n3ì  ìŠˆíŒ…ì˜ í˜ì‹ . ìŠ¤í˜ì´ì‹±ê³¼ ì˜¤í”„ë³¼ ë¬´ë¸Œì˜ êµê³¼ì„œ." },
        { name:"ë¦¬ì˜¤ë„¬ ë©”ì‹œ", sport:"ì¶•êµ¬", team:"ì¸í„° ë§ˆì´ì• ë¯¸", position:"FW", number:10, height:"170cm", weight:"72kg",
          main:"https://images.unsplash.com/photo-1517927033932-b3d18e61fb3a?auto=format&fit=crop&w=600&q=80",
          thumbnails:["https://images.unsplash.com/photo-1543326727-cf6c39e8f84c?auto=format&fit=crop&w=300&q=80"],
          bio:"\në“œë¦¬ë¸”Â·ì‹œì•¼Â·ê²°ì •ë ¥ ëª¨ë‘ ìµœìƒê¸‰ì˜ ë ˆì „ë“œ ê³µê²©ìˆ˜." },
        { name:"ì†í¥ë¯¼", sport:"ì¶•êµ¬", team:"í† íŠ¸ë„˜ í™‹ìŠ¤í¼", position:"FW", number:7, height:"183cm", weight:"78kg",
          main:"https://images.unsplash.com/photo-1508780709619-79562169bc64?auto=format&fit=crop&w=600&q=80",
          thumbnails:[],
          bio:"\nì–‘ë°œ ìŠˆíŒ…ê³¼ ì¹¨íˆ¬ê°€ ê°•ì ì¸ í”„ë¦¬ë¯¸ì–´ë¦¬ê·¸ ìŠ¤íƒ€." },
        { name:"í˜ì´ì»¤", sport:"E-ìŠ¤í¬ì¸ ", team:"T1", position:"MID", number:null, height:"177cm", weight:"56kg",
          main:"https://live.staticflickr.com/65535/52463757476_6affa467aa_b.jpg",
          thumbnails:["https://live.staticflickr.com/65535/52462683597_f175c3d3ac_b.jpg","https://live.staticflickr.com/65535/52463191906_1a55a52fbb_b.jpg","https://live.staticflickr.com/65535/52086086463_cc94c3f821_b.jpg","https://live.staticflickr.com/65535/54111496707_aa59c5d44f_b.jpg"],
          bio:"\në³¸ëª…: ì´ìƒí˜ \n\n êµ­ì : ëŒ€í•œë¯¼êµ­ \n\n ìƒë…„ì›”ì¼: 1996ë…„ 5ì›” 7ì¼\n\n ê²½ë ¥ ìƒê¸ˆ: $1,922,084.56 USD (ï¿¦2,674,484,561 KRW)\n\n LCKì˜ T1 ì†Œì† ì£¼ì¥ì´ì ë¯¸ë“œ ë¼ì´ë„ˆ ë° íŒŒíŠ¸ ì˜¤ë„ˆ.\n\n ëŒ€íšŒ ê²½ë ¥:\n Worlds ìš°ìŠ¹ 5íšŒ, MSI ìš°ìŠ¹ 2íšŒ, LCK ìš°ìŠ¹ 10íšŒ, EWC ìš°ìŠ¹ 1íšŒ, IEM ìš°ìŠ¹ 1íšŒ, ë¦¬í”„íŠ¸ ë¼ì´ë²Œì¦ˆ ìš°ìŠ¹ 1íšŒ, ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œ ì˜¬ìŠ¤íƒ€ì „ ìš°ìŠ¹ 5íšŒ, ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œ ì‹œì¦Œ í‚¥ì˜¤í”„ ìš°ìŠ¹ 1íšŒ, NLB ìš°ìŠ¹ 1íšŒ, ì•„ì‹œì•ˆ ê²Œì„ ê¸ˆë©”ë‹¬, Worlds MVP 2íšŒ, MSI MVP 1íšŒ, LCK í†µí•© MVP 2íšŒ, LCK í¬ìŠ¤íŠ¸ì‹œì¦Œ MVP 1íšŒ, EWC MVP 1íšŒ, LCK All-Pro First team 2íšŒ" },
        { name:"ë£°ëŸ¬", sport:"E-ìŠ¤í¬ì¸ ", team:"GEN.G", position:"BOT", number:null, height:"181cm", weight:"86kg",
          main:"https://images.unsplash.com/photo-1508780709619-79562169bc64?auto=format&fit=crop&w=600&q=80",
          thumbnails:[],
          bio:"\në³¸ëª…: ë°•ì¬í˜ \n\n êµ­ì : ëŒ€í•œë¯¼êµ­ \n\n ìƒë…„ì›”ì¼: 1996ë…„ 5ì›” 7ì¼\n\n ê²½ë ¥ ìƒê¸ˆ: $1,922,084.56 USD (ï¿¦2,674,484,561 KRW)\n\n LCKì˜ Gen.G ì†Œì† ì£¼ì¥ì´ì ë°”í…€ ë¼ì´ë„ˆ. Gen.G LoLì˜ ì²« ë²ˆì§¸ ì˜êµ¬ ê²°ë²ˆ ì„ ìˆ˜ì´ë‹¤" },
        { name:"í”¼ë„›", sport:"E-ìŠ¤í¬ì¸ ", team:"Hanwha Life Esports", position:"JGL", number:null, height:"170cm", weight:"53kg",
          main:"https://images.unsplash.com/photo-1508780709619-79562169bc64?auto=format&fit=crop&w=600&q=80",
          thumbnails:[],
          bio:"\në³¸ëª…: í•œì™•í˜¸ \n\n êµ­ì : ëŒ€í•œë¯¼êµ­ \n\n ìƒë…„ì›”ì¼: 1996ë…„ 5ì›” 7ì¼\n\n ê²½ë ¥ ìƒê¸ˆ: $1,922,084.56 USD (ï¿¦2,674,484,561 KRW)\n\n LCKì˜ í•œí™”ìƒëª…eìŠ¤í¬ì¸  ì†Œì† ì£¼ì¥ì´ì ì •ê¸€ëŸ¬." }, 
        { name:"ë”ìƒ¤ì´", sport:"E-ìŠ¤í¬ì¸ ", team:"Invictus Gaming", position:"TOP", number:null, height:"178cm", weight:"55kg",
          main:"https://images.unsplash.com/photo-1508780709619-79562169bc64?auto=format&fit=crop&w=600&q=80",
          thumbnails:[],
          bio:"\në³¸ëª…: ê°•ìŠ¹ë¡ \n\n êµ­ì : ëŒ€í•œë¯¼êµ­ \n\n ìƒë…„ì›”ì¼: 1996ë…„ 5ì›” 7ì¼\n\n ê²½ë ¥ ìƒê¸ˆ: $1,922,084.56 USD (ï¿¦2,674,484,561 KRW)\n\n LPLì˜ Invictus Gaming ì†Œì† íƒ‘ ë¼ì´ë„ˆ." },
        { name:"ì¼€ë¦¬ì•„", sport:"E-ìŠ¤í¬ì¸ ", team:"T1", position:"SPT", number:null, height:"165cm", weight:null,
          main:"https://images.unsplash.com/photo-1508780709619-79562169bc64?auto=format&fit=crop&w=600&q=80",
          thumbnails:[],
          bio:"\në³¸ëª…: ë¥˜ë¯¼ì„ \n\n êµ­ì : ëŒ€í•œë¯¼êµ­ \n\n ìƒë…„ì›”ì¼: 1996ë…„ 5ì›” 7ì¼\n\n ê²½ë ¥ ìƒê¸ˆ: $1,922,084.56 USD (ï¿¦2,674,484,561 KRW)\n\n LCKì˜ T1 ì†Œì† ì„œí¬í„°." },
      ];

      const products = {
        "ì‡¼í•‘": [
          { title:"ë¥´ë¸Œë¡  ì œì„ìŠ¤ êµ¿ì¦ˆ", price:"â‚©120,000",
            main:"https://images.unsplash.com/photo-1517649763962-0c623066013b?auto=format&fit=crop&w=600&q=80",
            thumbnails:["https://images.unsplash.com/photo-1606813902787-53e9497f7f26?auto=format&fit=crop&w=300&q=80","https://images.unsplash.com/photo-1518544881151-1ffb1453f4ec?auto=format&fit=crop&w=300&q=80"],
            desc:"ë¥´ë¸Œë¡  ì œì„ìŠ¤ í•œì •íŒ êµ¿ì¦ˆ." },
          { title:"ìŠ¤í…ŒíŒ ì»¤ë¦¬ êµ¿ì¦ˆ", price:"â‚©95,000",
            main:"https://images.unsplash.com/photo-1521412644187-c49fa049e84d?auto=format&fit=crop&w=600&q=80",
            thumbnails:["https://images.unsplash.com/photo-1546519638-68e109498ffc?auto=format&fit=crop&w=300&q=80","https://images.unsplash.com/photo-1550332781-aecd27c8a1a6?auto=format&fit=crop&w=300&q=80"],
            desc:"ì»¤ë¦¬ ì‹œê·¸ë‹ˆì²˜ ì—ë””ì…˜." },
          { title:"ë¦¬ì˜¤ë„¬ ë©”ì‹œ êµ¿ì¦ˆ", price:"â‚©150,000",
            main:"https://images.unsplash.com/photo-1517927033932-b3d18e61fb3a?auto=format&fit=crop&w=600&q=80",
            thumbnails:["https://images.unsplash.com/photo-1543326727-cf6c39e8f84c?auto=format&fit=crop&w=300&q=80"],
            desc:"ë©”ì‹œ ì›”ë“œíˆ¬ì–´ ê¸°ë… ë¨¸ì²œë‹¤ì´ì¦ˆ." },
          { title:"ì†í¥ë¯¼ êµ¿ì¦ˆ", price:"â‚©130,000",
            main:"https://images.unsplash.com/photo-1508780709619-79562169bc64?auto=format&fit=crop&w=600&q=80",
            thumbnails:[], desc:"ì†í¥ë¯¼ ì„ ìˆ˜ ì˜¤í”¼ì…œ êµ¿ì¦ˆ." },
          { title:"í˜ì´ì»¤ êµ¿ì¦ˆ", price:"â‚©110,000",
            main:"https://images.unsplash.com/photo-1511512578047-dfb367046420?auto=format&fit=crop&w=600&q=80",
            thumbnails:["https://images.unsplash.com/photo-1511512578047-dfb367046420?auto=format&fit=crop&w=300&q=80"],
            desc:"í˜ì´ì»¤ í•œì •íŒ ê²Œì´ë° ê¸°ì–´." }
        ]
      };

      /* ===== ë°°ë„ˆ ===== */
      const bannerData = [
        { src: "https://images.unsplash.com/photo-1604726923839-606d2f0e0870?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D", text:"ë†êµ¬ìš©í’ˆ ìµœëŒ€ 50% í• ì¸!" },
        { src: "https://images.unsplash.com/photo-1511886929837-354d827aae26?q=80&w=764&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D", text:"ì¶•êµ¬ ìš©í’ˆ íŠ¹ê°€! ë†“ì¹˜ì§€ ë§ˆì„¸ìš”" },
        { src: "https://images.unsplash.com/photo-1544652478-6653e09f18a2?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D", text:"E-ìŠ¤í¬ì¸  ê²Œì´ë° ê¸°ì–´ í• ì¸" }
      ];
      let currentBanner=0, bannerTimer=null;
      const bannerSection = document.getElementById('bannerSection');
      const adBannerDiv = document.getElementById('adBanner');
      const adBannerText = document.getElementById('adBannerText');
      function slideTo(next, direction = 1){
        const oldImg = adBannerDiv.querySelector('img');
        const newImg = document.createElement('img');
        newImg.src = bannerData[next].src;
        newImg.alt = bannerData[next].text;
        newImg.style.transform = `translateX(${direction>0? '100%':'-100%'})`;
        adBannerDiv.appendChild(newImg);
        adBannerText.textContent = bannerData[next].text;
        requestAnimationFrame(()=>{
          newImg.style.transform = 'translateX(0)';
          if(oldImg){ oldImg.style.transform = `translateX(${direction>0? '-100%':'100%'})`; }
        });
        setTimeout(()=>{ if(oldImg && adBannerDiv.contains(oldImg)) oldImg.remove(); }, 650);
      }
      function moveBanner(dir){
        const next = (currentBanner + dir + bannerData.length) % bannerData.length;
        slideTo(next, dir);
        currentBanner = next;
        resetBannerTimer();
      }
      function resetBannerTimer(){
        if(bannerTimer) clearInterval(bannerTimer);
        bannerTimer = setInterval(()=> moveBanner(1), 6000);
      }
      document.querySelector('.ad-arrow.left').addEventListener('click', ()=> moveBanner(-1));
      document.querySelector('.ad-arrow.right').addEventListener('click', ()=> moveBanner(1));
      resetBannerTimer();

      // ë°°ë„ˆ í´ë¦­/í‚¤ë³´ë“œ â†’ ì‡¼í•‘ìœ¼ë¡œ ì´ë™
      function goShopFromBanner(){
        const shopBtn = document.querySelector('#categoryBar [data-target="ì‡¼í•‘"]');
        if (shopBtn) {
          shopBtn.click();
          const catTop = document.querySelector('.categories')?.offsetTop ?? 0;
          window.scrollTo({ top: catTop, behavior: 'smooth' });
        }
      }
      adBannerDiv.addEventListener('click', goShopFromBanner);
      adBannerDiv.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); goShopFromBanner(); }});

      /* ===== ëª©ë¡ ë Œë” ===== */
      const content = document.getElementById('content');
      let currentCategory = 'ì „ì²´';

      function makePlayerCard(p, q=''){
        const card = document.createElement('div');
        card.className = 'product';
        card.innerHTML = `
          <img class="main-image" src="${p.main}" alt="${p.name}">
          <div class="product-title">${highlight(p.name, q)}</div>
          <div class="product-price">${[p.team||'', p.position?('Â· '+p.position):''].join(' ').trim()}</div>
        `;
        card.querySelector('.main-image').addEventListener('click', ()=> gotoDetail({mode:'player', data:p}));
        return card;
      }
      function makeProductCard(item){
        const card = document.createElement('div');
        card.className = 'product';
        card.innerHTML = `
          <img class="main-image" src="${item.main}" alt="${item.title}">
          <div class="product-title">${item.title}</div>
          <div class="product-price" style="color:#ff4d4f">${item.price ?? ''}</div>
        `;
        card.querySelector('.main-image').addEventListener('click', ()=> gotoDetail({mode:'product', data:item}));
        return card;
      }

      function renderPlayers(list, title, q=''){
        content.innerHTML = '';
        const t = document.createElement('div');
        t.className = 'section-title';
        t.textContent = title;
        const sc = document.createElement('div');
        sc.className = 'products-scroll';
        if(list.length === 0) sc.innerHTML = `<div style="padding:0 20px 24px; opacity:.9">ì¼ì¹˜í•˜ëŠ” ì„ ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</div>`;
        else list.forEach(p => sc.appendChild(makePlayerCard(p, q)));
        content.appendChild(t);
        content.appendChild(sc);
      }
      function renderShopping(list){
        content.innerHTML = '';
        const t = document.createElement('div');
        t.className = 'section-title';
        t.textContent = 'ì‡¼í•‘';
        const sc = document.createElement('div');
        sc.className = 'products-scroll';
        if(list.length === 0) sc.innerHTML = `<div style="padding:0 20px 24px; opacity:.9">ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
        else list.forEach(it => sc.appendChild(makeProductCard(it)));
        content.appendChild(t);
        content.appendChild(sc);
      }

      function renderByCategory(cat, q=''){
        currentCategory = cat;
        const qn = norm(q);

        // active & aria-current
        document.querySelectorAll('#categoryBar button').forEach(b=>{ b.classList.remove('active'); b.removeAttribute('aria-current'); });
        const activeBtn = document.querySelector(`#categoryBar [data-target="${cat}"]`);
        activeBtn?.classList.add('active'); activeBtn?.setAttribute('aria-current','page');

        // ì „í™˜
        content.style.display = 'block';
        detail.style.display = 'none';

        if (cat === 'ì „ì²´') {
          bannerSection.style.display = 'flex';
          const list = players.filter(p => [p.name,p.team,p.position].some(f => norm(f).includes(qn)));
          renderPlayers(list, q ? `ì„ ìˆ˜ ì†Œê°œ (ê²€ìƒ‰ ê²°ê³¼ ${list.length}ëª…)` : 'ì„ ìˆ˜ ì†Œê°œ', q);
          return;
        }
        if (cat === 'NBA' || cat === 'ì¶•êµ¬' || cat === 'E-ìŠ¤í¬ì¸ ') {
          bannerSection.style.display = 'none';
          const list = players.filter(p => p.sport === cat && [p.name,p.team,p.position].some(f => norm(f).includes(qn)));
          renderPlayers(list, q ? `${cat} (ê²€ìƒ‰ ê²°ê³¼ ${list.length}ëª…)` : cat, q);
          return;
        }
        if (cat === 'ì‡¼í•‘') {
          bannerSection.style.display = 'none';
          const base = products['ì‡¼í•‘'] || [];
          const list = base.filter(it => (it.title||'').toLowerCase().includes(qn));
          renderShopping(list);
          return;
        }
        bannerSection.style.display = 'none';
        content.innerHTML = `<div class="section-title">${cat}</div><div style="padding:0 20px 24px; opacity:.9">ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.</div>`;
      }

      /* ===== ìƒì„¸ (detail.html UX) ===== */
      const detail = document.getElementById('detailView');
      const dtTitle  = document.getElementById('dtTitle');
      const sliderTrack = document.getElementById('sliderTrack');
      const dtThumbs = document.getElementById('dtThumbs');
      const dtPreview= document.getElementById('dtPreview');
      const dtPrice = document.getElementById('dtPrice');
      const dtBadge = document.getElementById('dtBadge');
      const dtDesc  = document.getElementById('dtDesc');
      const dtActions = document.getElementById('dtActions');

      let imgIdx=0, allImgs=[], slideTimer=null;

      function highlightThumb(i){
        [...dtThumbs.children].forEach((el,idx)=>{
          el.style.outline = (idx===i) ? '2px solid #0074e9' : '';
        });
      }
      function showSlide(n){
        imgIdx = (n + allImgs.length) % allImgs.length;
        sliderTrack.style.transform = `translateX(-${imgIdx*100}%)`;
        highlightThumb(imgIdx);
        dtPreview.textContent = `(${imgIdx+1}/${allImgs.length}) ${dtTitle.textContent}`;
      }
      function next(){ showSlide(imgIdx+1); }
      function prev(){ showSlide(imgIdx-1); }
      function startAuto(){ stopAuto(); slideTimer = setInterval(next, 3000); }
      function stopAuto(){ if(slideTimer) clearInterval(slideTimer); }

      document.getElementById('prevBtn').onclick = ()=>{ prev(); startAuto(); };
      document.getElementById('nextBtn').onclick = ()=>{ next(); startAuto(); };
      document.getElementById('dtSlider').addEventListener('mouseenter', stopAuto);
      document.getElementById('dtSlider').addEventListener('mouseleave', startAuto);

      function gotoDetail(payload){
        const { mode, data: obj } = payload;

        // ì „í™˜
        content.style.display = 'none';
        bannerSection.style.display = 'none';
        detail.style.display = 'block';

        // ì •ë³´/ê°€ê²©/ë²„íŠ¼
        dtTitle.textContent = (mode === 'player') ? obj.name : (obj.title || 'ìƒì„¸');
        dtDesc.textContent  = (mode === 'player') ? (obj.bio || '') : (obj.desc || '');
        dtBadge.textContent = (mode === 'player')
          ? [obj.team, obj.position, (obj.number?('#'+obj.number):''), obj.height, obj.weight].filter(Boolean).join(' Â· ')
          : '';
        if(mode === 'product'){
          dtPrice.style.display='block'; dtPrice.textContent = obj.price || '';
          dtActions.style.display = 'flex';
        }else{
          dtPrice.style.display='none'; dtPrice.textContent = '';
          dtActions.style.display = 'none';
        }

        // ì´ë¯¸ì§€(ë©”ì¸ + ì¸ë„¤ì¼)
        allImgs = [obj.main, ...(obj.thumbnails || [])];
        sliderTrack.innerHTML = allImgs.map((src,i)=>`<img src="${src}" alt="${dtTitle.textContent} ${i+1}">`).join('');
        dtThumbs.innerHTML = '';
        allImgs.forEach((src,i)=>{
          const t = document.createElement('img');
          t.src = src; t.alt = `ì¸ë„¤ì¼ ${i+1}`;
          t.addEventListener('click', ()=>{ showSlide(i); startAuto(); });
          dtThumbs.appendChild(t);
        });

        showSlide(0);
        startAuto();
      }

      document.getElementById('backBtn').addEventListener('click', ()=>{
        detail.style.display = 'none';
        content.style.display = 'block';
        if(currentCategory==='ì „ì²´') bannerSection.style.display='flex';
        stopAuto();
      });

      function stopAuto(){ if(slideTimer) clearInterval(slideTimer); }

      /* ===== ì¹´í…Œê³ ë¦¬/ê²€ìƒ‰/ë¡œê³  ===== */
      document.getElementById('categoryBar').addEventListener('click', (e)=>{
        const btn = e.target.closest('button[data-target]');
        if(!btn) return;
        renderByCategory(btn.dataset.target);
      });

      const searchInput = document.getElementById('searchInput');
      function runSearch(){
        const q = searchInput.value.trim();
        // ìƒì„¸ ìƒíƒœì—ì„œ ê²€ìƒ‰ â†’ ëª©ë¡ ëª¨ë“œ
        detail.style.display = 'none';
        content.style.display = 'block';
        if(currentCategory==='ì „ì²´') bannerSection.style.display='flex'; else bannerSection.style.display='none';
        stopAuto();
        renderByCategory(currentCategory, q);
      }
      searchInput.addEventListener('input', runSearch);
      searchInput.addEventListener('keydown', (e)=>{
        if(e.key==='Escape'){ searchInput.value=''; runSearch(); }
        else if(e.key==='Enter'){ runSearch(); }
      });

      function goHome(){
        renderByCategory('ì „ì²´');
        detail.style.display='none';
        content.style.display='block';
        bannerSection.style.display='flex';
        stopAuto();
      }
      document.getElementById('logoHome').addEventListener('click', goHome);
      document.getElementById('logoHome').addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); goHome(); }});

      /* ì´ˆê¸° ë Œë” */
      renderLoginArea();
      renderByCategory('ì „ì²´');
    });
  </script>
</body>
</html>
